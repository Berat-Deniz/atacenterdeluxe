function scrollToProject(e){document.querySelectorAll(".project-details").forEach(e=>{e.classList.remove("visible"),e.style.display="none"});const t=document.getElementById("company-intro");t&&(t.classList.remove("visible"),t.style.display="none");const o=document.getElementById("maps-section");o&&(o.classList.remove("visible"),o.style.display="none");const n=document.getElementById("site-footer");n&&(n.classList.remove("visible"),n.style.display="none");const s=document.getElementById(e+"-details");s&&(s.style.display="block",setTimeout(()=>{s.classList.add("visible")},50),setTimeout(()=>{t&&(t.style.display="block",setTimeout(()=>{t.classList.add("visible")},100))},200),setTimeout(()=>{o&&(o.style.display="block",setTimeout(()=>{o.classList.add("visible")},100))},400),setTimeout(()=>{n&&(n.style.display="block",setTimeout(()=>{n.classList.add("visible")},100))},600),s.scrollIntoView({behavior:"smooth",block:"start"}))}function setupScrollAnimations(){setupScrollToTopButton()}function scrollToTop(){document.querySelectorAll(".project-details").forEach(e=>{e.classList.remove("visible"),e.style.display="none"});const e=document.getElementById("company-intro");e&&(e.classList.remove("visible"),e.style.display="none");const t=document.getElementById("maps-section");t&&(t.classList.remove("visible"),t.style.display="none");const o=document.getElementById("site-footer");o&&(o.classList.remove("visible"),o.style.display="none"),window.scrollTo({top:0,behavior:"smooth"})}function setupScrollToTopButton(){window.addEventListener("scroll",function(){const e=document.getElementById("scroll-to-top");e&&(window.scrollY>300?(e.style.opacity="1",e.style.visibility="visible"):(e.style.opacity="0",e.style.visibility="hidden"))})}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".project-btn").forEach(e=>{e.addEventListener("click",function(){scrollToProject(this.getAttribute("data-project"))})}),setupScrollAnimations(),setupIntersectionObserver(),setupImageOptimization()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&scrollToTop()});let currentSlideIndex={"ata-center-2+1":0,"ata-center-3+1":0,"ata-deluxe-2+1":0,"ata-deluxe-3+1":0},loadedEmbeds=new Set;function loadEmbed(e){if(loadedEmbeds.has(e))return;const t=e.getAttribute("data-src");t&&(e.src=t,loadedEmbeds.add(e),console.log("Embed yüklendi:",e.title))}function loadActiveSlideEmbed(e){const t=document.getElementById(e+"-carousel");if(!t)return;const o=t.querySelector(".carousel-slide.active");if(o){const e=o.querySelector("iframe");e&&loadEmbed(e)}}function setupIntersectionObserver(){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const o=t.target.querySelector("iframe");o&&loadEmbed(o),e.unobserve(t.target)}})},{root:null,rootMargin:"50px",threshold:.1});document.querySelectorAll(".carousel-slide").forEach(t=>{e.observe(t)})}function setupImageOptimization(){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const o=t.target,n=o.getAttribute("data-src");n&&((()=>{const e=document.createElement("canvas");return e.width=1,e.height=1,0===e.toDataURL("image/webp").indexOf("data:image/webp")})()&&n.includes(".jpg")?o.src=n.replace(".jpg",".webp"):o.src=n,o.removeAttribute("data-src")),e.unobserve(o)}})});document.querySelectorAll("img[data-src]").forEach(t=>e.observe(t))}let selectedApartment={"ata-center":null,"ata-deluxe":null};function selectApartment(e,t){console.log("selectApartment called:",e,t),selectedApartment[e]=t;const o=document.getElementById(e+"-selection");o&&(o.style.display="none");const n=document.querySelector(`#${e}-details .back-to-selection-btn`);n&&n.classList.add("show");const s=e+"-"+t+"-content",l=document.getElementById(s);l&&(l.style.display="block",setTimeout(()=>{l.classList.add("show"),loadActiveSlideEmbed(e+"-"+t)},100))}function backToSelection(e){console.log("backToSelection called:",e);const t=document.getElementById(e+"-selection");t&&(t.style.display="block");const o=document.querySelector(`#${e}-details .back-to-selection-btn`);o&&o.classList.remove("show");document.querySelectorAll(`[id*="${e}-"][id*="-content"]`).forEach(e=>{e.classList.remove("show"),setTimeout(()=>{e.style.display="none"},300)})}function changeSlide(e,t){console.log("changeSlide called:",e,t);const o=document.getElementById(e+"-carousel");if(!o)return void console.log("Carousel not found:",e+"-carousel");const n=o.querySelectorAll(".carousel-slide"),s=o.closest(".carousel-container").querySelectorAll(".dot");console.log("Found slides:",n.length),console.log("Found dots:",s.length),console.log("Current index:",currentSlideIndex[e]),n[currentSlideIndex[e]]&&n[currentSlideIndex[e]].classList.remove("active"),s[currentSlideIndex[e]]&&s[currentSlideIndex[e]].classList.remove("active"),currentSlideIndex[e]+=t,currentSlideIndex[e]>=n.length?currentSlideIndex[e]=0:currentSlideIndex[e]<0&&(currentSlideIndex[e]=n.length-1),console.log("New index:",currentSlideIndex[e]),n[currentSlideIndex[e]]&&(n[currentSlideIndex[e]].classList.add("active"),loadActiveSlideEmbed(e)),s[currentSlideIndex[e]]&&s[currentSlideIndex[e]].classList.add("active")}function currentSlide(e,t){const o=document.getElementById(e+"-carousel");if(!o)return;const n=o.querySelectorAll(".carousel-slide"),s=o.closest(".carousel-container").querySelectorAll(".dot");n[currentSlideIndex[e]]&&n[currentSlideIndex[e]].classList.remove("active"),s[currentSlideIndex[e]]&&s[currentSlideIndex[e]].classList.remove("active"),currentSlideIndex[e]=t-1,n[currentSlideIndex[e]]&&(n[currentSlideIndex[e]].classList.add("active"),loadActiveSlideEmbed(e)),s[currentSlideIndex[e]]&&s[currentSlideIndex[e]].classList.add("active")}function registerServiceWorker(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service Worker kaydedildi:",e.scope)}).catch(e=>{console.log("Service Worker kaydı başarısız:",e)})})}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".project-btn").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-3px) scale(1.02)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0) scale(1)"})})}),window.addEventListener("load",function(){const e=document.querySelector(".hero-content");e.style.opacity="0",e.style.transform="translateY(30px)",setTimeout(()=>{e.style.transition="all 1s ease-out",e.style.opacity="1",e.style.transform="translateY(0)"},300),registerServiceWorker()});